{"version":3,"sources":["webComponentBaseClass.js"],"names":["createQuickAccess","dashesToCamelCase","camelCaseToDashes","createShadowDOM","p_ComponentInstance","p_ComponentTemplate","templateInstance","window","webComponentTemplates","get","ShadyCSS","prepareTemplate","styleElement","shadowRoot","attachShadow","mode","appendChild","content","cloneNode","ensureQuickAccess","$","$$","p_Selector","querySelector","$$$","Array","from","querySelectorAll","handleConnected","p_Properties","originalValues","Object","keys","forEach","p_PropertyKey","property","attributeName","defineProperty","_properties","set","p_Value","oldValue","toAttribute","p_ConvertValue","toString","type","JSON","parse","isArray","stringify","Boolean","Number","String","observer","console","warn","constructor","is","reflectToAttribute","setAttribute","removeAttribute","userInitialized","originalValue","hasAttribute","getAttribute","value","base","webComponentBaseClass","HTMLElement","template","properties","observedAttributes","map","p_Name","assert","eventHandlers","connectedCallback","attached","onAttached","p_Callback","disconnectedCallback","detached","onDetached","p_Handler","element","removeEventListener","event","handler","attributeChangedCallback","p_Attribute","p_OldValue","p_NewValue","propertyName","addAutoEventListener","p_Element","p_EventName","find","push","addEventListener","removeAutoEventListener","eventIndex","findIndex","splice","refreshQuickAccess"],"mappings":"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","sourcesContent":["import { createQuickAccess, dashesToCamelCase, camelCaseToDashes } from './tools.js';\n\n/**\n * Create the shadow DOM and attach it to the given web component instance\n * @param {HTMLElement} p_ComponentInstance The web component instance to which we are attaching the shadow DOM\n * @param {string} p_ComponentTemplate The id of the web component template\n */\nfunction createShadowDOM(p_ComponentInstance, p_ComponentTemplate) {\n\t// retrieve the correct template from our map of previously stored templates\n\tconst templateInstance = window.webComponentTemplates.get(p_ComponentTemplate);\n\t// if we are using the shadyCSS polyfill, we must initialize that now\n\tif (window.ShadyCSS) {\n\t\twindow.ShadyCSS.prepareTemplate(templateInstance, p_ComponentTemplate);\n\t\twindow.ShadyCSS.styleElement(p_ComponentInstance);\n\t}\n\n\t// create the shadow DOM root here\n\tconst shadowRoot = p_ComponentInstance.attachShadow({ mode: 'open' });\n\tshadowRoot.appendChild(templateInstance.content.cloneNode(true));\n}\n\n/**\n * Create quick access members for this component. This function will add the possibility to access child elements that have an id, through\n * the $ member, it also allows to do a querySelector on the shadow dom through the $$ function and it will add querySelectorAll through the $$$ function\n * The $$$ function will return the child members as an array and not as an node list\n * @param {webComponentBaseClass} p_ComponentInstance The component for which we are creating the quick access members\n */\nfunction ensureQuickAccess(p_ComponentInstance) {\n\tif (!p_ComponentInstance.$) { // make sure we didn't do this already\n\t\tp_ComponentInstance.$ = createQuickAccess(p_ComponentInstance.shadowRoot, 'id');\n\t\tp_ComponentInstance.$$ = (p_Selector) => p_ComponentInstance.shadowRoot.querySelector(p_Selector);\n\t\tp_ComponentInstance.$$$ = (p_Selector) => Array.from(p_ComponentInstance.shadowRoot.querySelectorAll(p_Selector));\n\t}\n}\n\n/**\n * Initialize the web component after it has been added to the DOM\n * @param {webComponentBaseClass} p_ComponentInstance The component instance we are initializing\n * @param {object} p_Properties The object that contains any web component specific properties\n */\nfunction handleConnected(p_ComponentInstance, p_Properties) {\n\tensureQuickAccess(p_ComponentInstance);\n\tif (p_Properties) {\n\t\tconst originalValues = {};\n\n\t\tObject.keys(p_Properties).forEach((p_PropertyKey) => {\n\t\t\tconst property = p_Properties[p_PropertyKey];\n\t\t\tconst attributeName = camelCaseToDashes(p_PropertyKey);\n\n\t\t\toriginalValues[p_PropertyKey] = p_ComponentInstance[p_PropertyKey];\n\n\t\t\tObject.defineProperty(p_ComponentInstance, p_PropertyKey, {\n\t\t\t\tget() { return p_ComponentInstance._properties[p_PropertyKey]; },\n\t\t\t\tset(p_Value) {\n\t\t\t\t\tconst oldValue = p_ComponentInstance._properties[p_PropertyKey];\n\t\t\t\t\tlet toAttribute = (p_ConvertValue) => p_ConvertValue.toString();\n\t\t\t\t\tswitch (property.type) {\n\t\t\t\t\t\tcase Array: p_ComponentInstance._properties[p_PropertyKey] = (typeof p_Value === 'string') ? JSON.parse(p_Value) : Array.isArray(p_Value) ? p_Value : []; toAttribute = (p_ConvertValue) => JSON.stringify(p_ConvertValue); break;\n\t\t\t\t\t\tcase Boolean: p_ComponentInstance._properties[p_PropertyKey] = p_Value && p_Value !== 'false'; toAttribute = () => ''; break;\n\t\t\t\t\t\tcase Number: p_ComponentInstance._properties[p_PropertyKey] = Number(p_Value) || 0; break;\n\t\t\t\t\t\tcase Object: p_ComponentInstance._properties[p_PropertyKey] = (typeof p_Value === 'string') ? JSON.parse(p_Value) : (typeof p_Value === 'object') ? p_Value : {}; toAttribute = (p_ConvertValue) => JSON.stringify(p_ConvertValue); break;\n\t\t\t\t\t\tcase String: p_ComponentInstance._properties[p_PropertyKey] = String(p_Value) || ''; break;\n\t\t\t\t\t}\n\t\t\t\t\tif (property.observer) {\n\t\t\t\t\t\tif (typeof property.observer === 'function') {\n\t\t\t\t\t\t\tif (oldValue !== p_ComponentInstance._properties[p_PropertyKey]) {\n\t\t\t\t\t\t\t\tproperty.observer(p_ComponentInstance, p_ComponentInstance._properties[p_PropertyKey], oldValue);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (p_ComponentInstance[property.observer]) {\n\t\t\t\t\t\t\tif (oldValue !== p_ComponentInstance._properties[p_PropertyKey]) {\n\t\t\t\t\t\t\t\tp_ComponentInstance[property.observer](p_ComponentInstance._properties[p_PropertyKey], oldValue);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.warn(`The observer with the name: '${property.observer}' was not found inside the class for web component ${p_ComponentInstance.constructor.is}. Make sure that you added a public function with the name '${property.observer}' to the class.`);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (property.reflectToAttribute) {\n\t\t\t\t\t\tif (p_ComponentInstance._properties[p_PropertyKey]) {\n\t\t\t\t\t\t\tp_ComponentInstance.setAttribute(attributeName, toAttribute(p_ComponentInstance._properties[p_PropertyKey]));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tp_ComponentInstance.removeAttribute(attributeName);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\n\t\tObject.keys(p_Properties).forEach((p_PropertyKey) => {\n\t\t\tconst property = p_Properties[p_PropertyKey];\n\t\t\tconst attributeName = camelCaseToDashes(p_PropertyKey);\n\t\t\tlet userInitialized;\n\t\t\tlet originalValue = originalValues[p_PropertyKey] || null;\n\n\t\t\tif (originalValue) {\n\t\t\t\tswitch (property.type) {\n\t\t\t\t\tcase Array:\n\t\t\t\t\t\tif (Array.isArray(originalValue)) {\n\t\t\t\t\t\t\tp_ComponentInstance[p_PropertyKey] = originalValue;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\toriginalValue = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase Boolean:\n\t\t\t\t\t\tif (typeof originalValue === 'boolean') {\n\t\t\t\t\t\t\tp_ComponentInstance[p_PropertyKey] = originalValue;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\toriginalValue = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase Number:\n\t\t\t\t\t\tif (typeof originalValue === 'number') {\n\t\t\t\t\t\t\tp_ComponentInstance[p_PropertyKey] = originalValue;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\toriginalValue = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase Object:\n\t\t\t\t\t\tif (typeof originalValue === 'object') {\n\t\t\t\t\t\t\tp_ComponentInstance[p_PropertyKey] = originalValue;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\toriginalValue = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase String:\n\t\t\t\t\t\tif (typeof originalValue === 'string') {\n\t\t\t\t\t\t\tp_ComponentInstance[p_PropertyKey] = originalValue;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\toriginalValue = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/* if (originalValue === null)  { */\n\t\t\tif (p_ComponentInstance.hasAttribute(attributeName)) {\n\t\t\t\tuserInitialized = p_ComponentInstance.getAttribute(attributeName);\n\t\t\t}\n\n\t\t\tif (property.reflectToAttribute || p_ComponentInstance[p_PropertyKey] === undefined) {\n\t\t\t\t// use the user specified value if it was specified\n\t\t\t\tif (userInitialized !== undefined) {\n\t\t\t\t\tswitch (property.type) {\n\t\t\t\t\t\tcase Array:\n\t\t\t\t\t\t\tp_ComponentInstance[p_PropertyKey] = JSON.parse(userInitialized);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase Boolean:\n\t\t\t\t\t\t\tp_ComponentInstance[p_PropertyKey] = userInitialized !== 'false';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase Number:\n\t\t\t\t\t\t\tp_ComponentInstance[p_PropertyKey] = Number(userInitialized);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase Object:\n\t\t\t\t\t\t\tp_ComponentInstance[p_PropertyKey] = JSON.parse(userInitialized);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase String:\n\t\t\t\t\t\t\tp_ComponentInstance[p_PropertyKey] = String(userInitialized);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} else { // use the default value\n\t\t\t\t\tswitch (property.type) {\n\t\t\t\t\t\tcase Array:\n\t\t\t\t\t\t\tp_ComponentInstance[p_PropertyKey] = property.value || [];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase Boolean:\n\t\t\t\t\t\t\tp_ComponentInstance[p_PropertyKey] = property.value || false;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase Number:\n\t\t\t\t\t\t\tp_ComponentInstance[p_PropertyKey] = property.value || 0;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase Object:\n\t\t\t\t\t\t\tp_ComponentInstance[p_PropertyKey] = property.value || {};\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase String:\n\t\t\t\t\t\t\tp_ComponentInstance[p_PropertyKey] = property.value || '';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// }\n\t\t});\n\t}\n}\n\nconst base = 'web-component-base-element';\n\nexport class webComponentBaseClass extends HTMLElement {\n\t/**\n\t * Get the name for the web component. Derived classes must override this\n\t * @returns {string} The name of this web component\n\t */\n\tstatic get is() { return base; }\n\t/**\n\t * Get the name for the template. In general this should be the same as the is value\n\t * @returns {string} The name of the template to be used with the web component\n\t */\n\tstatic get template() { return this.is; }\n\t/**\n\t * Get the properties for this web component. Derived classes can override this if they want to provide properties. By default there are no properties\n\t * @returns {object} The properties object\n\t */\n\tstatic get properties() { return {}; }\n\t/**\n\t * Get an array containing all attributes that have an observer attached\n\t * @returns {array} Array containing all attributes that have an observer\n\t */\n\tstatic get observedAttributes() { return (this.properties) ? Object.keys(this.properties).map((p_Name) => camelCaseToDashes(p_Name)) : []; }\n\n\t/**\n\t * Constructor for this base class\n\t */\n\tconstructor() {\n\t\tsuper();\n\t\tthis._properties = {};\n\t\tthis.$ = null;\n\t\tthis.$$ = () => null;\n\t\tthis.$$$ = () => [];\n\t\tconsole.assert(this.constructor.is !== base, 'Error, make sure that the web component implements: static get is() { return \"name-of-your-web-component\"; }');\n\t\tcreateShadowDOM(this, this.constructor.template);\n\t\tthis.eventHandlers = [];\n\t}\n\n\t/**\n\t * Called by the system when the web component has been added to the DOM\n\t */\n\tconnectedCallback() {\n\t\thandleConnected(this, this.constructor.properties);\n\t\t// this function should be implemented INSIDE the derived cass, if you want to do additional initialization after the component gets attached to the DOM\n\t\tif (this.attached) {\n\t\t\tthis.attached();\n\t\t}\n\t\t// this function should be implemented OUTSIDE the derived cass, if you want to do additional initialization after the component gets attached to the DOM\n\t\tif (this.onAttached) {\n\t\t\tthis.onAttached();\n\t\t}\n\n\t\t// setter to set the onAttached function, this setter only exist after the component has been attached\n\t\tObject.defineProperty(this, 'onAttached', {\n\t\t\tget() { return undefined; },\n\t\t\tset(p_Callback) { p_Callback(); },\n\t\t});\n\t}\n\n\t/**\n\t * Called by the system when the web component has been removed from the DOM\n\t */\n\tdisconnectedCallback() {\n\t\t// this function should be implemented INSIDE the derived class when needed to handle the component being removed from the DOM\n\t\tif (this.detached) {\n\t\t\tthis.detached();\n\t\t}\n\t\t// this function can be implemented OUTSIDE of the derived class, if you want to be notified if the component has been removed from the DOM\n\t\tif (this.onDetached) {\n\t\t\tthis.onDetached();\n\t\t}\n\t\t// remove any auto event handler that was added\n\t\tthis.eventHandlers.forEach((p_Handler) => { p_Handler.element.removeEventListener(p_Handler.event, p_Handler.handler); });\n\t}\n\n\t/**\n\t * Called by the system if an attribute value is changed\n\t * @param {string} p_Attribute The name of the attribute that is changed\n\t * @param {*} p_OldValue The old value for the attribute\n\t * @param {*} p_NewValue The new value for the attribute\n\t */\n\tattributeChangedCallback(p_Attribute, p_OldValue, p_NewValue) {\n\t\tconst propertyName = dashesToCamelCase(p_Attribute);\n\t\tensureQuickAccess(this);\n\t\t// boolean are handled differently because the absence of the value also means false and the presence of the value also means true\n\t\tif (this.constructor.properties[propertyName] && this.constructor.properties[propertyName].type === Boolean) {\n\t\t\tp_OldValue = (p_OldValue === '' || p_OldValue !== 'false');\n\t\t\tp_NewValue = (p_NewValue === '' || p_NewValue !== 'false');\n\t\t}\n\t\t// we set our variable and the setter will handle the rest\n\t\tif (p_OldValue !== p_NewValue && this.hasAttribute(p_Attribute)) {\n\t\t\tthis[propertyName] = p_NewValue;\n\t\t}\n\t}\n\n\t/**\n\t * Attach an event handler to the given element. This function will automatically clean all event handlers when the web component gets removed from the DOM\n\t * @param {HTMLElement} p_Element The element to which we are attaching the event handler\n\t * @param {string} p_EventName The name of the event (e.g. click, mouse down etc)\n\t * @param {function} p_Callback The handler function to be called for the event\n\t */\n\taddAutoEventListener(p_Element, p_EventName, p_Callback) {\n\t\tif (!this.eventHandlers.find((p_Handler) => p_Handler.element === p_Element && p_Handler.event === p_EventName && p_Handler.handler === p_Callback)) {\n\t\t\tthis.eventHandlers.push({ element: p_Element, event: p_EventName, handler: p_Callback });\n\t\t\tp_Element.addEventListener(p_EventName, p_Callback);\n\t\t}\n\t}\n\n\t/**\n\t * Remove an event handler that was previously attached by a call to addAutoEventListener\n\t * @param {HTMLElement} p_Element The element from which the event will be removed\n\t * @param {string} p_EventName The name of the event to remove\n\t * @param {function} p_Callback The callback that was previously added for the event\n\t */\n\tremoveAutoEventListener(p_Element, p_EventName, p_Callback) {\n\t\tconst eventIndex = this.eventHandlers.findIndex((p_Handler) => p_Handler.element === p_Element && p_Handler.event === p_EventName && p_Handler.handler === p_Callback);\n\t\tif (eventIndex !== -1) {\n\t\t\tthis.eventHandlers.splice(eventIndex, 1);\n\t\t\tp_Element.removeEventListener(p_EventName, p_Callback);\n\t\t}\n\t}\n\n\t/**\n\t * recreate the quick access object using the current content of the shadow dom\n\t * use this when you manually add or remove items from the DOM\n\t */\n\trefreshQuickAccess() {\n\t\tthis.$ = createQuickAccess(this.shadowRoot, 'id');\n\t}\n}\n"]}